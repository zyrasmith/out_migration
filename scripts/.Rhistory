library(readr)
library(dplyr)
hd2024 <- read_csv("Documents/GitHub/out_migration/data/hd2024.csv")
hd2024 <- read_csv("GitHub/out_migration/data/hd2024.csv")
library(readr)
library(dplyr)
hd2024 <- read_csv("Documents/GitHub/out_migration/data/hd2024.csv")
hd2024 <- read_csv("../data/hd2024.csv")
library(readr)
library(dplyr)
# load IPEDS data and merge with the Carnegie Classification
hd2024 <- read_csv("../data/hd2024.csv")
ace <- read_csv("../data/ace-institutional-classifications.csv")
merged <- left_join(hd2024, ace, by = c("UNITID" = "unitid"))
# select variables and create a dataset for analysis
outmigration_data <- merged %>% select(UNITID, INSTNM, CITY, ZIP, ICLEVEL, DEGGRANT, HBCU, TRIBAL, CBSA, CBSATYPE, CSA, COUNTYCD, COUNTYNM, CONTROL, INSTCAT, `Institutional Classification`, `Student Access and Earnings Classification`)
# create HSI status variable
outmigration_data$HSI <- 0
X2025_HSILists <- read_excel("../data/2025_HSILists.xlsx")
library(readxl)
X2025_HSILists <- read_excel("../data/2025_HSILists.xlsx")
hsi_data <- X2025_HSILists %>% select(INSTNM, HSI)
merged1 <- left_join(outmigration_data, hsi_data, by = c("INSTNM"))
merged2 <- merged1 %>% mutate(HSI = coalesce(HSI.y, HSI.x)) %>% select(-HSI.x, -HSI.y)
# final dataset for analysis
write_csv(merged2, "~/Documents/GitHub/out_migration/data/outmigration_data.csv")
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
glimpse(outmigration_data)
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
glimpse(outmigration_data)
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(PURPOSE = `Institutional Classification`, SELECTIVITY = `Student Access and Earnings Classification`)
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(PURPOSE = `Institutional Classification`, SELECTIVITY = `Student Access and Earnings Classification`)
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(PURPOSE = `Institutional Classification`, SELECTIVITY = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", PURPOSE), !grepl("^Profession", PURPOSE))
glimpse(outmigration_data)
unique(outmigration_data$PURPOSE)
outmigration_data <- outmigration_data %>% mutate(purpose_num = case_when(
PURPOSE == "Mixed Associate Small" ~ 1,
PURPOSE == "Mixed Associate Medium" ~ 2,
PURPOSE == "Mixed Associate Large" ~ 3,
PURPOSE == "Mixed Baccalaureate" ~ 4,
PURPOSE == "Mixed Undergraduate/Graduate-Master's Small" ~ 5,
PURPOSE == "Mixed Undergraduate/Graduate-Master's Medium" ~ 6,
PURPOSE == "Mixed Undergraduate/Graduate-Master's Large" ~ 7,
PURPOSE == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
PURPOSE == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
PURPOSE == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
PURPOSE == "NA" ~ -1 ))
unique(outmigration_data$PURPOSE)
purpose_lookup <- tibble(purpose_num = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Medium", "Mixed UG/Grad Master's Large",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Baccalaureate" ~ 4,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Medium" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
purpose == "NA" ~ -1 )) %>% select(-purpose)
names(outmigration_data)
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Medium", "Mixed UG/Grad Master's Large",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
table(outmigration_data$PURPOSE, outmigration_data$purpose_num, useNA = "ifany")
table(outmigration_data$PURPOSE, outmigration_data$PURPOSE, useNA = "ifany")
outmigration_data %>% select(PURPOSE) %>% distinct() %>% arrange(PURPOSE)
View(outmigration_data)
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Baccalaureate" ~ 4,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Medium" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(PURPOSE) ~ -1 )) %>% select(-purpose)
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Baccalaureate" ~ 4,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Medium" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(PURPOSE) ~ -1 )) %>% select(-purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Baccalaureate" ~ 4,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Medium" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(purpose) ~ -1 )) %>% select(-purpose)
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Medium", "Mixed UG/Grad Master's Large",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
View(outmigration_data)
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Baccalaureate" ~ 4,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Medium" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(purpose) ~ -1 ))
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Medium", "Mixed UG/Grad Master's Large",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
outmigration_data %>%
filter(is.na(purpose)) %>%
count()
outmigration_data %>%
filter(PURPOSE == -1) %>%
count()
table(is.na(outmigration_data$purpose), outmigration_data$PURPOSE == -1, useNA = "ifany")
outmigration_data %>% select(PURPOSE) %>% distinct() %>% arrange(PURPOSE)
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Baccalaureate" ~ 4,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Medium" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
TRUE ~ -1 ))
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Medium", "Mixed UG/Grad Master's Large",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
outmigration_data %>%
filter(is.na(purpose)) %>%
count()
outmigration_data %>%
filter(PURPOSE == -1) %>%
count()
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
table(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Associate/Baccalaureate" ~ 4
purpose == "Mixed Baccalaureate" ~ 5,
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Associate/Baccalaureate" ~ 4,
purpose == "Mixed Baccalaureate" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large/Medium" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(purpose) ~ -1 ))
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large",
"Mixed Associate/Baccalaureate", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Large/Medium",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
outmigration_data %>%
filter(is.na(purpose)) %>%
count()
outmigration_data %>%
filter(PURPOSE == -1) %>%
count()
table(is.na(outmigration_data$purpose), outmigration_data$PURPOSE == -1, useNA = "ifany")
outmigration_data %>% select(PURPOSE) %>% distinct() %>% arrange(PURPOSE)
library(readr)
outmigration_data <- read_csv("~/Documents/GitHub/out_migration/data/outmigration_data.csv")
# Clean and recode Carnegie classification variables
outmigration_data <- outmigration_data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
outmigration_data <- outmigration_data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(outmigration_data$purpose)
table(outmigration_data$purpose)
outmigration_data <- outmigration_data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Associate/Baccalaureate" ~ 4,
purpose == "Mixed Baccalaureate" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large/Medium" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(purpose) ~ -1 )) %>% select(-purpose)
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large",
"Mixed Associate/Baccalaureate", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Large/Medium",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
unique(outmigration_data$selectivity)
table(outmigration_data$selectivity)
outmigration_data <- outmigration_data %>% mutate(SELECTIVITY = case_when(
selectivity == "Lower Access, Lower Earnings" ~ 1,
selectivity == "Lower Access, Medium Earnings" ~ 2,
selectivity == "Lower Access, Higher Earnings" ~ 3,
selectivity == "Higher Access, Lower Earnings" ~ 4,
selectivity == "Higher Access, Medium Earnings" ~ 5,
selectivity == "Opportunity Colleges and Universities-Higher Access, Higher Earnings" ~ 6,
is.na(selectivity) ~ -1,
selectivity == "Not Classified" ~ -2)) %>% select(-selectivity)
table(outmigration_data$SELECTIVITY)
library(readr)
library(dplyr)
# load IPEDS data and merge with the Carnegie Classification
hd2024 <- read_csv("../data/hd2024.csv")
ace <- read_csv("../data/ace-institutional-classifications.csv")
merged <- left_join(hd2024, ace, by = c("UNITID" = "unitid"))
# select variables and create a dataset for analysis
data <- merged %>% select(UNITID, INSTNM, CITY, ZIP, ICLEVEL, DEGGRANT, HBCU, TRIBAL, CBSA, CBSATYPE, CSA, COUNTYCD, COUNTYNM, CONTROL, INSTCAT, `Institutional Classification`, `Student Access and Earnings Classification`)
# create HSI status variable
data$HSI <- 0
library(readxl)
X2025_HSILists <- read_excel("../data/2025_HSILists.xlsx")
hsi_data <- X2025_HSILists %>% select(INSTNM, HSI)
merged1 <- left_join(data, hsi_data, by = c("INSTNM"))
merged2 <- merged1 %>% mutate(HSI = coalesce(HSI.y, HSI.x)) %>% select(-HSI.x, -HSI.y)
# final dataset for analysis
write_csv(merged2, "~/Documents/GitHub/out_migration/data/data.csv")
library(readr)
data <- read_csv("~/Documents/GitHub/out_migration/data/data.csv")
# Clean and recode Carnegie classification variables
data <- data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
data <- data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(data$purpose)
data <- data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Associate/Baccalaureate" ~ 4,
purpose == "Mixed Baccalaureate" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large/Medium" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(purpose) ~ -1 )) %>% select(-purpose)
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large",
"Mixed Associate/Baccalaureate", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Large/Medium",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
unique(data$selectivity)
data <- data %>% mutate(SELECTIVITY = case_when(
selectivity == "Higher Access, Lower Earnings" ~ 1,
selectivity == "Higher Access, Medium Earnings" ~ 2,
selectivity == "Opportunity Colleges and Universities-Higher Access, Higher Earnings" ~ 3,
selectivity == "Lower Access, Lower Earnings" ~ 4,
selectivity == "Lower Access, Medium Earnings" ~ 5,
selectivity == "Lower Access, Higher Earnings" ~ 6,
is.na(selectivity) ~ -1,
selectivity == "Not Classified" ~ -2)) %>% select(-selectivity)
selectivity_lookup <- tibble(SELECTIVITY = c(-2, -1, 1:6), selectivity_label = c(
"Not Classified", "NA",
"Higher Access, Lower Earnings", "Higher Access, Medium Earnings", "Opportunity Colleges and Universities (High Access, High Earnings)",
"Lower Access, Lower Earnings", "Lower Access, Medium Earnings", "Lower Access, Higher Earnings"))
write_csv(data, "~/Documents/GitHub/out_migration/data/outmigration_data.csv")
library(readr)
library(dplyr)
# load IPEDS data and merge with the Carnegie Classification
hd2024 <- read_csv("../data/hd2024.csv")
# load IPEDS data and merge with the Carnegie Classification
hd2024 <- read_csv("../data/sources/hd2024.csv")
library(readr)
library(dplyr)
# load IPEDS data and merge with the Carnegie Classification
hd2024 <- read_csv("../data/sources/hd2024.csv")
ace <- read_csv("../data/sources/ace-institutional-classifications.csv")
merged <- left_join(hd2024, ace, by = c("UNITID" = "unitid"))
# select variables and create a dataset for analysis
data <- merged %>% select(UNITID, INSTNM, CITY, ZIP, ICLEVEL, DEGGRANT, HBCU, TRIBAL, CBSA, CBSATYPE, CSA, COUNTYCD, COUNTYNM, CONTROL, INSTCAT, `Institutional Classification`, `Student Access and Earnings Classification`)
# create HSI status variable
data$HSI <- 0
library(readxl)
X2025_HSILists <- read_excel("../data/sources/2025_HSILists.xlsx")
hsi_data <- X2025_HSILists %>% select(INSTNM, HSI)
merged1 <- left_join(data, hsi_data, by = c("INSTNM"))
merged2 <- merged1 %>% mutate(HSI = coalesce(HSI.y, HSI.x)) %>% select(-HSI.x, -HSI.y)
# final dataset for analysis
write_csv(merged2, "~/Documents/GitHub/out_migration/data/data.csv")
library(readr)
data <- read_csv("~/Documents/GitHub/out_migration/data/data.csv")
# Clean and recode Carnegie classification variables
data <- data %>% rename(purpose = `Institutional Classification`, selectivity = `Student Access and Earnings Classification`)
data <- data %>% filter(!grepl("^Special", purpose), !grepl("^Profession", purpose))
unique(data$purpose)
data <- data %>% mutate(PURPOSE = case_when(
purpose == "Mixed Associate Small" ~ 1,
purpose == "Mixed Associate Medium" ~ 2,
purpose == "Mixed Associate Large" ~ 3,
purpose == "Mixed Associate/Baccalaureate" ~ 4,
purpose == "Mixed Baccalaureate" ~ 5,
purpose == "Mixed Undergraduate/Graduate-Master's Small" ~ 6,
purpose == "Mixed Undergraduate/Graduate-Master's Large/Medium" ~ 7,
purpose == "Mixed Undergraduate/Graduate-Doctorate Small" ~ 8,
purpose == "Mixed Undergraduate/Graduate-Doctorate Medium" ~ 9,
purpose == "Mixed Undergraduate/Graduate-Doctorate Large" ~ 10,
is.na(purpose) ~ -1 )) %>% select(-purpose)
purpose_lookup <- tibble(PURPOSE = c(-1, 1:10),
purpose_label = c("NA", "Mixed Associate Small", "Mixed Associate Medium", "Mixed Associate Large",
"Mixed Associate/Baccalaureate", "Mixed Baccalaureate",
"Mixed UG/Grad Master's Small", "Mixed UG/Grad Master's Large/Medium",
"Mixed UG/Grad Doctorate Small", "Mixed UG/Grad Doctorate Medium", "Mixed UG/Grad Doctorate Large"))
unique(data$selectivity)
data <- data %>% mutate(SELECTIVITY = case_when(
selectivity == "Higher Access, Lower Earnings" ~ 1,
selectivity == "Higher Access, Medium Earnings" ~ 2,
selectivity == "Opportunity Colleges and Universities-Higher Access, Higher Earnings" ~ 3,
selectivity == "Lower Access, Lower Earnings" ~ 4,
selectivity == "Lower Access, Medium Earnings" ~ 5,
selectivity == "Lower Access, Higher Earnings" ~ 6,
is.na(selectivity) ~ -1,
selectivity == "Not Classified" ~ -2)) %>% select(-selectivity)
selectivity_lookup <- tibble(SELECTIVITY = c(-2, -1, 1:6), selectivity_label = c(
"Not Classified", "NA",
"Higher Access, Lower Earnings", "Higher Access, Medium Earnings", "Opportunity Colleges and Universities (High Access, High Earnings)",
"Lower Access, Lower Earnings", "Lower Access, Medium Earnings", "Lower Access, Higher Earnings"))
write_csv(data, "~/Documents/GitHub/out_migration/data/outmigration_data.csv")
